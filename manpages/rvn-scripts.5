.Dd May 14, 2024
.Dt RVN-SCRIPT 5
.Os
.Sh NAME
.Nm "shell scripts"
.Nd Shell scripts that are run by
.Xr rvn 8
.Sh DESCRIPTION
.Xr rvn 8
runs scripts at distinct phases of package maintenance:
.Bl -tag -width Ds
.It Cm pre-install :
runs script before installing files on the system.
.It Cm post-install :
runs script after installing files on the system.
.It Cm pre-deinstall :
runs script before removing files on the system.
.It Cm post-deinstall :
runs script after removing files on the system.
.El
.Pp
In the case of a package upgrade, the scripts are run in this order:
.Bl -enum -compact
.It
new pre-install
.It
old pre-deinstall
.It
replace binaries
.It
new post-install
.El
.Sh Environment
The following environment variable are exported to be used by the script:
.Bl -tag -width Ds
.It Ev PKG_NAMEBASE
Represents the namebase of the port that created the package.
.It Ev PKG_SUBPACKAGE
Represents the subpackage of the port variant.
.It Ev PKG_VARIANT
Represents the name of the variant of the port.
.It Ev PKG_PREFIX
.Va PREFIX
defined within the package at build time.
.It Ev PKG_OUTFILE
path to a temporary file to to be used to be able to send messages via >>
to the user that will be shown at the end of the
.Xr rvn 8
process.
.It Ev PKG_UPGRADE
Variable existing when the scripts is run in the context of an upgrade
of the package
.El
.Sh SEE ALSO
.Xr rvn-keywords 5 ,
.Xr rvn-lua-scripts 5 ,
.Xr rvn-repository 5 ,
.Xr rvn-triggers 5 ,
.Xr rvn.conf 5 ,
.Xr rvn 8 ,
.Xr rvn-alias 8 ,
.Xr rvn-annotate 8 ,
.Xr rvn-audit 8 ,
.Xr rvn-autoremove 8 ,
.Xr rvn-catalog 8 ,
.Xr rvn-check 8 ,
.Xr rvn-clean 8 ,
.Xr rvn-config 8 ,
.Xr rvn-create 8 ,
.Xr rvn-fetch 8 ,
.Xr rvn-genrepo 8 ,
.Xr rvn-info 8 ,
.Xr rvn-install 8 ,
.Xr rvn-query 8 ,
.Xr rvn-remove 8 ,
.Xr rvn-rquery 8 ,
.Xr rvn-search 8 ,
.Xr rvn-shell 8 ,
.Xr rvn-shlib 8 ,
.Xr rvn-stats 8 ,
.Xr rvn-upgrade 8 ,
.Xr rvn-version 8 ,
.Xr rvn-which 8
